<!DOCTYPE html>
<html>
<head>
	<title>infografico</title>
</head>
<body>

<canvas id="quadro" width="800" height="600"></canvas>
<script src="https://code.createjs.com/createjs-2015.05.21.min.js"></script>
<script >
	
	var stage = new createjs.Stage("quadro");

	//___________________________________________________________ IMAGENS _______________________________________________________

	//inicio
	var fundoinicio = new createjs.Bitmap("./inicio/bgarquibancada.png");
	var confete = new createjs.Bitmap("./inicio/confete.png");
	var doidoscarnaval = new createjs.Bitmap("./inicio/doidosporcarnaval.png");
	var logoinicio = new createjs.Bitmap("./inicio/logodoidosporcarnaval.png");
	var conscientizazao = new createjs.Bitmap("./inicio/umdesfiledeconscientizacao.png");

	//tela base
	var fundo = new createjs.Bitmap("./telabase/fundo.jpg");
	var logo = new createjs.Bitmap("./telabase/logoquintessencia.png");

	//funções
	var fecha = new createjs.Bitmap("./funcoes/fechar.png");
	var botaosom = new createjs.SpriteSheet({
		"animations": {
			"csom": [0],
			"ssom": [1]
		},
		"images": ["./funcoes/som.png"],
		"frames": {
			"height": 25,
			"width": 25,
			"regX": 0,
			"regY": 0
		}
	});
	var btsom = new createjs.Sprite(botaosom);

	//abas
	var abas = new createjs.Bitmap("./info/telaabasmenu.png");

	//sobre o trabalho
	var sobre = new createjs.Bitmap("./info/telacompleta.png");

	//colabore
	var ajudaf = new createjs.Bitmap("./colabore/ajudafinanceira.png");
	var barrat = new createjs.Bitmap("./colabore/barratexto.png");
	var colaboree = new createjs.Bitmap("./colabore/colabore.png");
	var doeacess = new createjs.Bitmap("./colabore/doeacessorios.png");
	var voluntarie = new createjs.Bitmap("./colabore/sevoluntarie.png");

	//alas/placeholder
	var pa11 = new createjs.Bitmap("./alas/ph11.png");
	var pa12 = new createjs.Bitmap("./alas/ph12.png");
	var pa13 = new createjs.Bitmap("./alas/ph13.png");
	var pa14 = new createjs.Bitmap("./alas/ph14.png");
	var pa21 = new createjs.Bitmap("./alas/ph21.png");
	var pa22 = new createjs.Bitmap("./alas/ph22.png");
	var pa23 = new createjs.Bitmap("./alas/ph23.png");
	var pa24 = new createjs.Bitmap("./alas/ph24.png");
	var nomea = new createjs.Bitmap("./alas/alas.png");
	var esq = new createjs.Bitmap("./funcoes/esquerda.png");
	var dir = new createjs.Bitmap("./funcoes/direita.png");

	//importa imagens e animações do menu
	var bloco = new createjs.SpriteSheet({
		"animations": {
			"normal": [0],
			"over": [1]
		},
		"images": ["./menu/bloco.png"],
		"frames": {
			"height": 22,
			"width": 49,
			"regX": 0,
			"regY": 0
		}
	});
	var alas = new createjs.SpriteSheet({
		"animations": {
			"normal": [0],
			"over": [1]
		},
		"images": ["./menu/alas.png"],
		"frames": {
			"height": 21,
			"width": 27,
			"regX": 0,
			"regY": 0
		}
	});
	var colabore = new createjs.SpriteSheet({
		"animations": {
			"normal": [0],
			"over": [1]
		},
		"images": ["./menu/colabore.png"],
		"frames": {
			"height": 23,
			"width": 56,
			"regX": 0,
			"regY": 0
		}
	});
	var btbloco = new createjs.Sprite(bloco);
	var btalas = new createjs.Sprite(alas);
	var btcolabore = new createjs.Sprite(colabore);
	var abasmenu = new createjs.Bitmap("./menu/telaabasmenu.png");
	var menu = new createjs.Bitmap("./menu/menu.png");
	var setamenu = new createjs.Bitmap("./menu/setamenu.png");
	var menuaberto = new createjs.Bitmap("./menu/fundomenuaberto.png");
	//__________________________________________________________________________________________________________________________

	//_______________________________________________ SONS _____________________________________________________________________


	var caminho = "./musicas/";
	var sons = [
		{id: "cuica", src: "cuica.wav", data: 1},
		{id: "m4", src: "chocalho.wav", data: 1},
		{id: "m5", src: "essa5.wav", data: 1}
	];

	createjs.Sound.addEventListener("fileload", toca);
	createjs.Sound.registerSounds(sons, caminho);

	var cc;
	var mm1;
	var mm2;

	function toca(target){
		cc = createjs.Sound.play("cuica", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});
		mm1 = createjs.Sound.play("m4", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});
		mm2 = createjs.Sound.play("m5", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});
	}

	//controla os sons da bateria
	var c = true;
	var m4 = true;
	var m5 = true;
	var geral = true;

	function somgeral(){
		if(geral == true){
			cc.play();
			mm1.play();
			mm2.play();
			som();
		}
		else{
			cc.stop();
			mm1.stop();
			mm2.stop();
		}
	}

	//verifica os sons da bateria
	function som(){
		if (c == false)
			cc.paused = true;
		else
			cc.paused = false;
		if (m4 == false)
			mm1.paused = true;
		else
			mm1.paused = false;
		if (m5 == false)
			mm2.paused = true;
		else
			mm2.paused = false;
	}

	//___________________________________________________________________________________________________________________________

	
	//controle de estado das paginas
	var pagina = 0;				//página
	var opcao = null;			//parte do aplicativo
	var aberto = false;			//controle do menu
	var selecionada = null;		//controle das alas

	//ativa evento do mouse
	stage.enableMouseOver();

	btsom.addEventListener("mouseover",  function(){
											btsom.cursor = "pointer";
										});

	//botão de menu clicável
	menu.addEventListener("mousedown",  function(){
											if (aberto == true)
												aberto = false;
											else
												aberto = true;
										});
	menu.addEventListener("mouseover",  function(){
											menu.cursor = "pointer";
										});


	//botão de fechar clicável
	fecha.addEventListener("mousedown", function(){
											//verifica se as alas tão abertas. se sim, fecha elas. se não, fecha tudo
											if (opcao == 2 && selecionada == 0 || selecionada == 1 || selecionada == 2 || selecionada == 3)
												selecionada = null;
											else
												opcao = null;
										})
	fecha.addEventListener("mouseover", function(){
											fecha.cursor = "pointer";
										});

	btsom.addEventListener("mousedown", function(){
											if (geral == false)
												geral = true;
											else
												geral = false;
										})

	//logo clicável
	logo.addEventListener("mousedown", 	function(){
											opcao = 0;
										})
	logo.addEventListener("mouseover", 	function(){
											logo.cursor = "pointer";
										})


	//botoes das alas
	pa11.addEventListener("mousedown", 	function(){
											selecionada = 0;
										})
	pa11.addEventListener("mouseover", 	function(){
											pa11.cursor = "pointer";
										})
	pa12.addEventListener("mousedown", 	function(){
											selecionada = 1;
										})
	pa12.addEventListener("mouseover", 	function(){
											pa12.cursor = "pointer";
										})
	pa13.addEventListener("mousedown", 	function(){
											selecionada = 2;
										})
	pa13.addEventListener("mouseover", 	function(){
											pa13.cursor = "pointer";
										})
	pa14.addEventListener("mousedown", 	function(){
											selecionada = 3;
										})
	pa14.addEventListener("mouseover", 	function(){
											pa14.cursor = "pointer";
										})
	esq.addEventListener("mousedown", 	function(){
											selecionada = selecionada - 1;
										})
	esq.addEventListener("mouseover", 	function(){
											esq.cursor = "pointer";
										})
	dir.addEventListener("mousedown", 	function(){
											selecionada = selecionada + 1;
										})
	dir.addEventListener("mouseover", 	function(){
											dir.cursor = "pointer";
										})


	
	

	//botões do menu
	btbloco.gotoAndPlay("normal");
	btalas.gotoAndPlay("normal");
	btcolabore.gotoAndPlay("normal");

	btbloco.addEventListener("mouseover", function(){
											btbloco.gotoAndPlay("over");
											btbloco.cursor = "pointer";
										});
	btbloco.addEventListener("mouseout", function(){
											btbloco.gotoAndPlay("normal");
										});
	btbloco.addEventListener("mousedown", function(){
											opcao = null;
											aberto = false;
										});

	btalas.addEventListener("mouseover", function(){
											btalas.gotoAndPlay("over");
											btalas.cursor = "pointer";
										});
	btalas.addEventListener("mouseout", function(){
											btalas.gotoAndPlay("normal");
										});
	btalas.addEventListener("mousedown", function(){
											opcao = 2;
											aberto = false;
										});

	btcolabore.addEventListener("mouseover", function(){
											btcolabore.gotoAndPlay("over");
											btcolabore.cursor = "pointer";
										});
	btcolabore.addEventListener("mouseout", function(){
											btcolabore.gotoAndPlay("normal");
										});
	btcolabore.addEventListener("mousedown", function(){
											opcao = 1;
											aberto = false;
										});


				


	//adiciona itens na tela
	function adi(){
		//baseado na pagina
		switch(pagina){
			//inicio
			case 0:
				stage.addChild(fundoinicio);
				fundoinicio.x = 0;
				fundoinicio.y = 0
				stage.addChild(confete);
				confete.x = 0;
				confete.y = 0;
				stage.addChild(logoinicio);
				stage.addChild(doidoscarnaval);
				doidoscarnaval.x = 0;
				doidoscarnaval.y = 0;
				stage.addChild(conscientizazao);
				conscientizazao.x = 0;
				conscientizazao.y = 0;
				//tempo que a tela some
				//window.setTimeout(	function(){
				//						pagina = 1;
				//					}, 3000);
				break;
			//tela base
			case 1:
				stage.addChild(fundo);
				stage.addChild(logo);
				logo.x = 713;
				logo.y = 534;
				stage.addChild(menu);
				menu.x = 39;
				menu.y = 40;
				stage.addChild(setamenu);
				setamenu.x = 66;
				setamenu.y = 123;
				stage.addChild(btsom);
				btsom.x = 759;
				btsom.y = 16;
				//nas opções
				switch (opcao){
					case 0:
						stage.addChild(abas);
						abas.x = 67;
						abas.y = 159;
						stage.addChild(sobre);
						stage.addChild(fecha);
						fecha.x = 698;
						fecha.y = 170;
						break;
					case 1:
						stage.addChild(abas);
						abas.x = 67;
						abas.y = 159;
						stage.addChild(ajudaf);
						ajudaf.x = 133;
						ajudaf.y = 250;
						stage.addChild(barrat);
						barrat.x = 135;
						barrat.y = 448;
						stage.addChild(colaboree);
						colaboree.x = 86;
						colaboree.y = 180;
						stage.addChild(doeacess);
						doeacess.x = 336;
						doeacess.y = 250;
						stage.addChild(voluntarie);
						voluntarie.x = 535;
						voluntarie.y = 250;
						stage.addChild(fecha);
						fecha.x = 698;
						fecha.y = 170;
						break;
					case 2:
						stage.addChild(abas);
						abas.x = 67;
						abas.y = 159;
						stage.addChild(nomea);
						nomea.x = 86;
						nomea.y = 180;
						stage.addChild(pa11);
						pa11.x = 96;
						pa11.y = 284;
						stage.addChild(pa12);
						pa12.x = 256;
						pa12.y = 284;
						stage.addChild(pa13);
						pa13.x = 413;
						pa13.y = 284;
						stage.addChild(pa14);
						pa14.x = 571;
						pa14.y = 284;
						stage.addChild(fecha);
						fecha.x = 698;
						fecha.y = 170;
						switch (selecionada){
							case 0:
								stage.removeChild(nomea);
								stage.removeChild(pa11);
								stage.removeChild(pa12);
								stage.removeChild(pa13);
								stage.removeChild(pa14);
								stage.addChild(pa21);
								pa21.x = 135;
								pa21.y = 225;
								stage.addChild(esq);
								esq.x = 85;
								esq.y = 350;
								stage.addChild(dir);
								dir.x = 700;
								dir.y = 350;
								break;
							case 1:
								stage.removeChild(nomea);
								stage.removeChild(pa11);
								stage.removeChild(pa12);
								stage.removeChild(pa13);
								stage.removeChild(pa14);
								stage.addChild(pa22);
								pa22.x = 135;
								pa22.y = 225;
								stage.addChild(esq);
								esq.x = 85;
								esq.y = 350;
								stage.addChild(dir);
								dir.x = 700;
								dir.y = 350;
								break;
							case 2:
								stage.removeChild(nomea);
								stage.removeChild(pa11);
								stage.removeChild(pa12);
								stage.removeChild(pa13);
								stage.removeChild(pa14);
								stage.addChild(pa23);
								pa23.x = 135;
								pa23.y = 225;
								stage.addChild(esq);
								esq.x = 85;
								esq.y = 350;
								stage.addChild(dir);
								dir.x = 700;
								dir.y = 350;
								break;
							case 3:
								stage.removeChild(nomea);
								stage.removeChild(pa11);
								stage.removeChild(pa12);
								stage.removeChild(pa13);
								stage.removeChild(pa14);
								stage.addChild(pa24);
								pa24.x = 135;
								pa24.y = 225;
								stage.addChild(esq);
								esq.x = 85;
								esq.y = 350;
								stage.addChild(dir);
								dir.x = 700;
								dir.y = 350;
								break;
						}
						break;
					default:
						opcao = null;
						stage.removeChild(fecha);
						stage.removeChild(pa11);
						stage.removeChild(pa12);
						stage.removeChild(pa13);
						stage.removeChild(pa14);
						stage.removeChild(pa21);
						stage.removeChild(pa22);
						stage.removeChild(pa23);
						stage.removeChild(pa24);
						stage.removeChild(esq);
						stage.removeChild(dir);
				}
				//menu
				if (aberto == true){
					stage.addChild(menuaberto);
					menuaberto.x = 38;
					menuaberto.y = 89;
					stage.addChild(btbloco);
					btbloco.x = 55;
					btbloco.y = 124;
					stage.addChild(btalas);
					btalas.x = 67;
					btalas.y = 172;
					stage.addChild(btcolabore);
					btcolabore.x = 52;
					btcolabore.y = 219;
					stage.addChild(menu);
					stage.removeChild(setamenu);
				}
				else{
					stage.removeChild(menuaberto);
					stage.removeChild(btbloco);
					stage.removeChild(btalas);
					stage.removeChild(btcolabore);
				}
				break;
			default:
				pagina = 0;
		}
	}		

	function posicao(){
				logoinicio.x = -500;
				logoinicio.y = -350;
				fundoinicio.x = 0;
				fundoinicio.y = 0
				confete.x = 0;
				confete.y = 0;
				doidoscarnaval.x = 0;
				doidoscarnaval.y = 0;
				conscientizazao.x = 0;
				conscientizazao.y = 0;
				fundoinicio.alpha = 0;
				confete.alpha = 0;
				doidoscarnaval.alpha = 0;
				conscientizazao.alpha = 0;
				logo.x = 713;
				logo.y = 534;
				menu.x = 39;
				menu.y = 40;
				setamenu.x = 66;
				setamenu.y = 123;
				btsom.x = 759;
				btsom.y = 16;
				stage.addChild(abas);
						abas.x = 67;
						abas.y = 159;
						
						fecha.x = 698;
						fecha.y = 170;
						abas.x = 67;
						abas.y = 159;
						ajudaf.x = 133;
						ajudaf.y = 250;
						barrat.x = 135;
						barrat.y = 448;
						colaboree.x = 86;
						colaboree.y = 180;
						doeacess.x = 336;
						doeacess.y = 250;
						voluntarie.x = 535;
						voluntarie.y = 250;
						fecha.x = 698;
						fecha.y = 170;
						abas.x = 67;
						abas.y = 159;
						nomea.x = 86;
						nomea.y = 180;
						pa11.x = 96;
						pa11.y = 284;
						pa12.x = 256;
						pa12.y = 284;
						pa13.x = 413;
						pa13.y = 284;
						pa14.x = 571;
						pa14.y = 284;
						fecha.x = 698;
						fecha.y = 170;
								pa21.x = 135;
								pa21.y = 225;
								esq.x = 85;
								esq.y = 350;
								dir.x = 700;
								dir.y = 350;
								pa22.x = 135;
								pa22.y = 225;
								esq.x = 85;
								esq.y = 350;
								dir.x = 700;
								dir.y = 350;
								pa23.x = 135;
								pa23.y = 225;
								esq.x = 85;
								esq.y = 350;
								dir.x = 700;
								dir.y = 350;
								pa24.x = 135;
								pa24.y = 225;
								esq.x = 85;
								esq.y = 350;
								dir.x = 700;
								dir.y = 350;
								menuaberto.x = 38;
					menuaberto.y = 89;
					btbloco.x = 55;
					btbloco.y = 124;
					btalas.x = 67;
					btalas.y = 172;
					btcolabore.x = 52;
					btcolabore.y = 219;
	}

	createjs.Ticker.addEventListener("tick", handleTick);	

	//atualiza a tela
	function handleTick(){
		createjs.Tween.get(logoinicio).to({x: 0, y:0}, 2000);
		createjs.Tween.get(fundoinicio).to({alpha: 1}, 1500);
		createjs.Tween.get(doidoscarnaval).wait(2000).to({alpha: 1}, 900);
		createjs.Tween.get(conscientizazao).wait(2500).to({alpha: 1}, 1200);
		createjs.Tween.get(confete).to({alpha: 1}, 2000);
		if (selecionada != null && selecionada > 3)
			selecionada = 0;
		if (selecionada != null && selecionada < 0)
			selecionada = 3;

		if(geral == true)
			btsom.gotoAndPlay("csom");
		else
			btsom.gotoAndPlay("ssom");
		
		somgeral();
		adi();
		stage.update();
	}


</script>

</body>
</html>